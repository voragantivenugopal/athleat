!function(e,t,n){"function"==typeof define&&define.amd?define(["jquery"],function($){return n($,e,t),$.mobile}):n(e.jQuery,e,t)}(this,document,function(e,t,n,o){!function($,e,t,n){function o(e){for(;e&&"undefined"!=typeof e.originalEvent;)e=e.originalEvent;return e}function i(e,t){var i=e.type,s,a,r,c,u,l,p,h,v;if(e=$.Event(e),e.type=t,s=e.originalEvent,a=$.event.props,i.search(/^(mouse|click)/)>-1&&(a=k),s)for(p=a.length,c;p;)c=a[--p],e[c]=s[c];if(i.search(/mouse(down|up)|click/)>-1&&!e.which&&(e.which=1),i.search(/^touch/)!==-1&&(r=o(s),i=r.touches,u=r.changedTouches,l=i&&i.length?i[0]:u&&u.length?u[0]:n))for(h=0,v=X.length;h<v;h++)c=X[h],e[c]=l[c];return e}function s(e){for(var t={},n,o;e;){n=$.data(e,y);for(o in n)n[o]&&(t[o]=t.hasVirtualBinding=!0);e=e.parentNode}return t}function a(e,t){for(var n;e;){if(n=$.data(e,y),n&&(!t||n[t]))return e;e=e.parentNode}return null}function r(){N=!1}function c(){N=!0}function u(){H=0,O.length=0,B=!1,c()}function l(){r()}function p(){h(),I=setTimeout(function(){I=0,u()},$.vmouse.resetTimerDuration)}function h(){I&&(clearTimeout(I),I=0)}function v(e,t,n){var o;return(n&&n[e]||!n&&a(t.target,e))&&(o=i(t,e),$(t.target).trigger(o)),o}function d(e){var t=$.data(e.target,E),n;B||H&&H===t||(n=v("v"+e.type,e),n&&(n.isDefaultPrevented()&&e.preventDefault(),n.isPropagationStopped()&&e.stopPropagation(),n.isImmediatePropagationStopped()&&e.stopImmediatePropagation()))}function f(e){var t=o(e).touches,n,i,a;t&&1===t.length&&(n=e.target,i=s(n),i.hasVirtualBinding&&(H=F++,$.data(n,E,H),h(),l(),L=!1,a=o(e).touches[0],x=a.pageX,S=a.pageY,v("vmouseover",e,i),v("vmousedown",e,i)))}function m(e){N||(L||v("vmousecancel",e,s(e.target)),L=!0,p())}function g(e){if(!N){var t=o(e).touches[0],n=L,i=$.vmouse.moveDistanceThreshold,a=s(e.target);L=L||Math.abs(t.pageX-x)>i||Math.abs(t.pageY-S)>i,L&&!n&&v("vmousecancel",e,a),v("vmousemove",e,a),p()}}function w(e){if(!N){c();var t=s(e.target),n,i;v("vmouseup",e,t),L||(n=v("vclick",e,t),n&&n.isDefaultPrevented()&&(i=o(e).changedTouches[0],O.push({touchID:H,x:i.clientX,y:i.clientY}),B=!0)),v("vmouseout",e,t),L=!1,p()}}function b(e){var t=$.data(e,y),n;if(t)for(n in t)if(t[n])return!0;return!1}function T(){}function D(e){var t=e.substr(1);return{setup:function(){b(this)||$.data(this,y,{});var n=$.data(this,y);n[e]=!0,M[e]=(M[e]||0)+1,1===M[e]&&z.bind(t,d),$(this).bind(t,T),j&&(M.touchstart=(M.touchstart||0)+1,1===M.touchstart&&z.bind("touchstart",f).bind("touchend",w).bind("touchmove",g).bind("scroll",m))},teardown:function(){--M[e],M[e]||z.unbind(t,d),j&&(--M.touchstart,M.touchstart||z.unbind("touchstart",f).unbind("touchmove",g).unbind("touchend",w).unbind("scroll",m));var n=$(this),o=$.data(this,y);o&&(o[e]=!1),n.unbind(t,T),b(this)||n.removeData(y)}}}var y="virtualMouseBindings",E="virtualTouchID",P="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),X="clientX clientY pageX pageY screenX screenY".split(" "),Y=$.event.mouseHooks?$.event.mouseHooks.props:[],k=$.event.props.concat(Y),M={},I=0,x=0,S=0,L=!1,O=[],B=!1,N=!1,j="addEventListener"in t,z=$(t),F=1,H=0,V,q;for($.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500},q=0;q<P.length;q++)$.event.special[P[q]]=D(P[q]);j&&t.addEventListener("click",function(e){var t=O.length,n=e.target,o,i,s,a,r,c;if(t)for(o=e.clientX,i=e.clientY,V=$.vmouse.clickDistanceThreshold,s=n;s;){for(a=0;a<t;a++)if(r=O[a],c=0,s===n&&Math.abs(r.x-o)<V&&Math.abs(r.y-i)<V||$.data(s,E)===r.touchID)return e.preventDefault(),void e.stopPropagation();s=s.parentNode}},!0)}(e,t,n),function($){$.mobile={}}(e),function($,e){var t={touch:"ontouchend"in n};$.mobile.support=$.mobile.support||{},$.extend($.support,t),$.extend($.mobile.support,t)}(e),function($,e,t){function o(e,n,o,i){var s=o.type;o.type=n,i?$.event.trigger(o,t,e):$.event.dispatch.call(e,o),o.type=s}var i=$(n),s=$.mobile.support.touch,a="touchmove scroll",r=s?"touchstart":"mousedown",c=s?"touchend":"mouseup",u=s?"touchmove":"mousemove";$.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(e,t){$.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)},$.attrFn&&($.attrFn[t]=!0)}),$.event.special.scrollstart={enabled:!0,setup:function(){function e(e,n){i=n,o(t,i?"scrollstart":"scrollstop",e)}var t=this,n=$(t),i,s;n.bind(a,function(t){$.event.special.scrollstart.enabled&&(i||e(t,!0),clearTimeout(s),s=setTimeout(function(){e(t,!1)},50))})},teardown:function(){$(this).unbind(a)}},$.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var e=this,t=$(e),n=!1;t.bind("vmousedown",function(s){function a(){clearTimeout(l)}function r(){a(),t.unbind("vclick",c).unbind("vmouseup",a),i.unbind("vmousecancel",r)}function c(t){r(),n||u!==t.target?n&&t.preventDefault():o(e,"tap",t)}if(n=!1,s.which&&1!==s.which)return!1;var u=s.target,l;t.bind("vmouseup",a).bind("vclick",c),i.bind("vmousecancel",r),l=setTimeout(function(){$.event.special.tap.emitTapOnTaphold||(n=!0),o(e,"taphold",$.Event("taphold",{target:u}))},$.event.special.tap.tapholdThreshold)})},teardown:function(){$(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),i.unbind("vmousecancel")}},$.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(t){var n=e.pageXOffset,o=e.pageYOffset,i=t.clientX,s=t.clientY;return 0===t.pageY&&Math.floor(s)>Math.floor(t.pageY)||0===t.pageX&&Math.floor(i)>Math.floor(t.pageX)?(i-=n,s-=o):(s<t.pageY-o||i<t.pageX-n)&&(i=t.pageX-n,s=t.pageY-o),{x:i,y:s}},start:function(e){var t=e.originalEvent.touches?e.originalEvent.touches[0]:e,n=$.event.special.swipe.getLocation(t);return{time:(new Date).getTime(),coords:[n.x,n.y],origin:$(e.target)}},stop:function(e){var t=e.originalEvent.touches?e.originalEvent.touches[0]:e,n=$.event.special.swipe.getLocation(t);return{time:(new Date).getTime(),coords:[n.x,n.y]}},handleSwipe:function(e,t,n,i){if(t.time-e.time<$.event.special.swipe.durationThreshold&&Math.abs(e.coords[0]-t.coords[0])>$.event.special.swipe.horizontalDistanceThreshold&&Math.abs(e.coords[1]-t.coords[1])<$.event.special.swipe.verticalDistanceThreshold){var s=e.coords[0]>t.coords[0]?"swipeleft":"swiperight";return o(n,"swipe",$.Event("swipe",{target:i,swipestart:e,swipestop:t}),!0),o(n,s,$.Event(s,{target:i,swipestart:e,swipestop:t}),!0),!0}return!1},eventInProgress:!1,setup:function(){var e,t=this,n=$(t),o={};e=$.data(this,"mobile-events"),e||(e={length:0},$.data(this,"mobile-events",e)),e.length++,e.swipe=o,o.start=function(e){if(!$.event.special.swipe.eventInProgress){$.event.special.swipe.eventInProgress=!0;var n,s=$.event.special.swipe.start(e),a=e.target,r=!1;o.move=function(e){s&&!e.isDefaultPrevented()&&(n=$.event.special.swipe.stop(e),r||(r=$.event.special.swipe.handleSwipe(s,n,t,a),r&&($.event.special.swipe.eventInProgress=!1)),Math.abs(s.coords[0]-n.coords[0])>$.event.special.swipe.scrollSupressionThreshold&&e.preventDefault())},o.stop=function(){r=!0,$.event.special.swipe.eventInProgress=!1,i.off(u,o.move),o.move=null},i.on(u,o.move).one(c,o.stop)}},n.on(r,o.start)},teardown:function(){var e,t;e=$.data(this,"mobile-events"),e&&(t=e.swipe,delete e.swipe,e.length--,0===e.length&&$.removeData(this,"mobile-events")),t&&(t.start&&$(this).off(r,t.start),t.move&&i.off(u,t.move),t.stop&&i.off(c,t.stop))}},$.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe.left",swiperight:"swipe.right"},function(e,t){$.event.special[e]={setup:function(){$(this).bind(t,$.noop)},teardown:function(){$(this).unbind(t)}}})}(e,this)});