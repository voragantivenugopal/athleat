!function($){"use strict";$(function(){function o(o,e,t){var n="webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend";e?o.one(n,function(){$(this).off(n),t($(this))}):o.on(n,function(){$(this).off(n),t($(this))})}function e(o,e,t){var n="webkitAnimationEnd oanimationend oAnimationEnd msAnimationEnd animationend";e?o.one(n,function(){$(this).off(n),t($(this))}):o.on(n,function(){$(this).off(n),t($(this))})}function t(e){N=!0;var t=void 0===e?h.hasClass("woofc-cart-open"):e;t?(h.removeClass("woofc-cart-open"),j=!1,r(),setTimeout(function(){C.scrollTop(0),m()},500)):(h.addClass("woofc-cart-open"),j=!0),o(h,!0,function(){N=!1,t?h.removeClass("woofc-cart-opened"):h.addClass("woofc-cart-opened")})}function n(o,e){if(O&&clearInterval(O),o.data("loading"))return!1;var t={fragments:e};o.removeClass("added"),o.data("loading",!0),o.addClass("loading"),a("add",t,function(e){o.removeClass("loading").addClass("added"),o.removeData("loading"),$(document.body).trigger("woofc_added_to_cart",[e]),O=setTimeout(function(){o.removeClass("added")},3e3)}),m()}function a(o,e,t){if($("html").addClass("woofc-loading"),W)return!1;W=!0;var n={url:wc_cart_fragments_params.wc_ajax_url.toString().replace("%%endpoint%%","get_refreshed_fragments"),type:"post",success:function(e){i(e,o,t)}};if("remove"!==o&&"undo"!==o&&(Cookies.remove("woofc_last_removed"),S.removeClass("woofc-visible")),"refresh"===o)return $.ajax(n),!1;if("add"===o)return i(e,o,t),!1;var a={action:"woofc_update_cart",type:o};a=$.extend(a,e),$.ajax({url:WOOFC.ajaxurl,data:a,type:"post",success:function(o){o.error||$.ajax(n)}})}function i(o,e,t){"remove"===e||"undo"===e?$.each(o.fragments,function(o,e){"woofc"===o?(l(e.subtotal),u(e.total_items)):-1===o.search(".woofc")&&$(o).replaceWith(e)}):$.each(o.fragments,function(o,e){"woofc"!==o&&$(o).replaceWith(e)}),E&&(sessionStorage.setItem(wc_cart_fragments_params.fragment_name,JSON.stringify(o.fragments)),_(o.cart_hash),o.cart_hash&&v()),$(document.body).trigger("wc_fragments_refreshed"),m();var n=h.attr("data-loadingtimeout")?parseInt(h.attr("data-loadingtimeout")):0;setTimeout(function(){$("html").addClass("woofc-stoploading"),setTimeout(function(){$("html").removeClass("woofc-loading woofc-stoploading"),void 0!==t&&t(o)},n)},100),W=!1}function c(o,e,t){e>0?a("update",{cart_item_key:o,cart_item_qty:e},function(n){$(document.body).trigger("woofc_product_update",[o,e]),void 0!==t&&t(n)}):s(o,t)}function s(o,e){g();var t=new Date;t.setTime(t.getTime()+8e3),Cookies.set("woofc_last_removed",{key:o,html:y.find(".woofc-deleted"),position:y.find(".woofc-deleted").index()},{expires:t}),a("remove",{cart_item_key:o},function(){r();var t=y.find('li[data-key="'+o+'"]'),n=t.offset().top-C.children("ul").offset().top;t.css("top",n+"px"),t.addClass("woofc-deleted"),S.data("key",o).addClass("woofc-visible"),$(document.body).trigger("woofc_product_removed",[o]),m(),I=setTimeout(function(){r(),void 0!==e&&e()},8e3)})}function r(){I&&clearInterval(I),Cookies.remove("woofc_last_removed"),S.removeData("key").removeClass("woofc-visible"),y.find(".woofc-deleted").remove()}function d(o,e){a("undo",{cart_item_key:o},e)}function f(o){a("refresh",{},o)}function u(o){var e=h.hasClass("woofc-empty"),t=o+1;e?(x.find("li").eq(0).text(o),x.find("li").eq(1).text(t)):(x.addClass("woofc-update-count"),setTimeout(function(){x.find("li").eq(0).text(o)},150),setTimeout(function(){x.removeClass("woofc-update-count")},200),setTimeout(function(){x.find("li").eq(1).text(t)},230)),w()}function l(o){k=h.find(".woofc-checkout").find("span.amount"),k.html(o)}function m(){0===y.find("li:not(.woofc-deleted):not(.woofc-no-product)").length?h.addClass("woofc-empty"):h.removeClass("woofc-empty")}function w(){Number(x.find("li").eq(0).text())>99?x.addClass("woofc-count-big"):x.removeClass("woofc-count-big")}function v(){E&&sessionStorage.setItem("wc_cart_created",(new Date).getTime())}function _(o){E&&(localStorage.setItem(A,o),sessionStorage.setItem(A,o))}function p(t,n){g(),void 0!==n&&n.removeClass("woofc-shake"),T.removeClass("woofc-shake woofc-visible"),setTimeout(function(){T.text(t).addClass("woofc-visible"),o(T,!0,function(){T.addClass("woofc-shake"),void 0!==n&&n.addClass("woofc-shake"),e(T,!0,function(){T.removeClass("woofc-shake"),F=setTimeout(function(){T.removeClass("woofc-visible")},5e3)})})},100)}function g(){F&&clearInterval(F),S.removeClass("woofc-visible"),T.removeClass("woofc-visible")}if("undefined"==typeof wc_cart_fragments_params)return!1;var h=$(".woofc");if(h.length>0){var C=h.find(".woofc-body"),y=C.find("ul").eq(0),k=h.find(".woofc-checkout").find("span.amount"),b=h.find(".woofc-trigger"),x=b.find(".woofc-count"),q=h.find(".woofc-spinner-wrap"),T=h.find(".woofc-cart-error"),F,S=h.find(".woofc-undo"),I,O,j=!1,N=!1,D=!1,W=!1,E,A=wc_cart_fragments_params.ajax_url.toString()+"-wc_cart_hash";try{E="sessionStorage"in window&&null!==window.sessionStorage,window.sessionStorage.setItem("wc","test"),window.sessionStorage.removeItem("wc"),window.localStorage.setItem("wc","test"),window.localStorage.removeItem("wc")}catch(o){E=!1}$(document.body).on("added_to_cart",function(o,e,t,a){n(a,e)}),$(document.body).on("updated_wc_div updated_cart_totals applied_coupon removed_coupon",function(){D||f()}),$(document.body).on("wc_fragments_refreshed",function(){y=C.find("ul").eq(0),k=h.find(".woofc-checkout").find("span.amount")}),$("body").hasClass("woocommerce-cart")&&$(document.body).on("woofc_product_update woofc_product_removed woofc_undo_product_remove",function(){W||(D=!0,$(document.body).trigger("wc_update_cart"),$(document).ajaxComplete(function(o,e,t){t.url===wc_cart_fragments_params.wc_ajax_url.toString().replace("%%endpoint%%","get_refreshed_fragments")&&(D=!1,$(o.currentTarget).unbind("ajaxComplete"))}))}),$(document.body).on("wc_fragments_refreshed",function(){y=C.find("ul").eq(0)}),b.on("vclick",function(o){o.preventDefault(),N||t()}),h.on("vclick",function(o){$(o.target).is($(this))&&t(!0)}),C.on("vclick",".woofc-delete-item",function(o){o.preventDefault(),s($(o.target).parents(".woofc-product").data("key"))}),$(document).on("change",".woofc-quantity input",function(){var o=$(this).parent(),e=parseFloat($(this).attr("min")),t=parseFloat($(this).attr("max"));e&&e>0&&parseFloat($(this).val())<e?($(this).val(e),p(WOOFC.lang.min_qty_required,o)):t&&t>0&&parseFloat($(this).val())>t&&($(this).val(t),p(WOOFC.lang.max_stock_reached,o));var n=$(this).closest(".woofc-product"),a=$(this).val();c(n.data("key"),a)}),$(document).on("vclick",".woofc-quantity-up, .woofc-quantity-down",function(o){o.preventDefault();var e=$(this).closest(".woofc-quantity"),t=e.find("input"),n=parseFloat(t.val()),a=parseFloat(t.attr("max")),i=parseFloat(t.attr("min")),s=t.attr("step"),r=n;n&&""!==n&&"NaN"!==n||(n=0),""!==a&&"NaN"!==a||(a=""),""!==i&&"NaN"!==i||(i=0),"any"!==s&&""!==s&&void 0!==s&&"NaN"!==parseFloat(s)||(s=1),$(this).is(".woofc-quantity-up")?a&&(a===n||n>a)?(r=a,p(WOOFC.lang.max_stock_reached,e)):r=n+parseFloat(s):i&&(i===n||n<i)?(r=i,p(WOOFC.lang.min_qty_required,e)):n>0&&(r=n-parseFloat(s));var d=t.closest(".woofc-product"),f=d.data("key");n!==r&&c(f,r)}),S.on("vclick","a",function(o){o.preventDefault();var t=y.find(".woofc-deleted");t.addClass("woofc-undo-deleted"),e(t,!0,function(o){o.removeClass("woofc-deleted woofc-undo-deleted").removeAttr("style");var e=S.data("key");d(e,function(){$(document.body).trigger("woofc_undo_product_remove",[e])}),m()}),S.removeClass("woofc-visible")})}h.length>0&&(w(),f(function(){$("body").addClass("woofc-ready")})),window.woofc_refresh_cart=f})}(jQuery,window);