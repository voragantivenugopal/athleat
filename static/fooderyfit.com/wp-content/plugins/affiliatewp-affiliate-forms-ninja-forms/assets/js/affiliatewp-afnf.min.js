jQuery(document).ready(function(e){function a(e){return'<div class="error afnf-error nf-error-msg">'+e+"</div>"}function n(){e(".nf-form-cont").has(".email-wrap").length?i.hasEmail=!0:i.hasEmail=!1,e(".nf-form-cont").has(".affwp_afnf_username-wrap").length?i.hasUsername=!0:i.hasUsername=!1,i.hasEmail||i.hasUsername?i.hasEmail?i.loggedIn&&i.hasEmail?(document.querySelector(".nf-form-cont input[type='button']").disabled=!1,i.hasEmail&&(document.querySelector(".nf-form-cont input[type='email']").disabled=!0),i.hasUsername&&(document.querySelector(".nf-form-cont .affwp_afnf_username-wrap input").disabled=!0)):i.hasEmail&&(document.querySelector(".nf-form-cont input").disabled=!1,document.querySelector(".nf-form-cont input[type='button']").disabled=!1,e(".nf-form-cont").has(".afnf-error").length&&e(".afnf-error").remove()):(document.querySelector(".nf-form-cont input").disabled=!0,document.querySelector(".nf-form-cont input[type='button']").disabled=!0,e(".nf-form-content").prepend(a(i.missingEmail)),i.debug&&(console.afnf(i.missingEmail),console["debugger"])):(e(".nf-form-cont input").disabled=!0,e(".nf-form-cont input[type='button']").disabled=!0,e(".nf-form-content").prepend(a(i.missingFields)),i.debug&&(console.afnf(i.missingFields),console["debugger"]))}var i={input_email:e(".nf-form-content .email-container .email-wrap input"),email_value:e(".nf-form-content .email-container .email-wrap input").val(),input_username:e(".nf-form-content .affwp_afnf_username-container .affwp_afnf_username-wrap input"),loggedIn:affiliatewp_afnf.logged_in,afnfFormID:affiliatewp_afnf.afnf_form_id,isAFNFForm:function(){var e="";return e==i.afnfFormID},emailExists:affiliatewp_afnf.error_email_exists,missingEmail:affiliatewp_afnf.error_missing_email,isEmpty:affiliatewp_afnf.error_email_empty,missingFields:affiliatewp_afnf.error_missing_fields,missingUsername:affiliatewp_afnf.error_missing_username,submit:e(".nf-form-cont input[type='button']"),hasEmail:!1,hasUsername:!1,"debugger":function(e){return e="","Affiliate Forms for Ninja Forms: \n"+e},debug:!1};console.afnf=function(){Array.prototype.unshift.call(arguments,i["debugger"]()),console.error.apply(console,arguments)},n();var f=Marionette.Object.extend({initialize:function(){var e=Backbone.Radio.channel("submit");this.listenTo(e,"validate:field",this.validateRequired);var a=Backbone.Radio.channel("fields");this.listenTo(a,"change:modelValue",this.validateRequired)},validateRequired:function(a){var n=!1;if(n="affwp_afnf_payment_email"!=a.get("type"),!n||"email"==a.get("type"))if(a.get("value"))Backbone.Radio.channel("fields").request("remove:error",a.get("id"),"afnf-error"),e.ajax({url:affiliatewp_afnf.ajax_url,type:"get",data:{action:"affiliatewp_afnf_validate_email",afnf_get_email:a.get("value")},success:function(e){0!=e&&(i.debug&&console.afnf(e),Backbone.Radio.channel("fields").request("add:error",a.get("id"),"afnf-error",e),"undefined"!=typeof wp.a11y&&wp.a11y.speak(e,"assertive"))}});else{if(Backbone.Radio.channel("fields").request("add:error",a.get("id"),"afnf-error",affiliatewp_afnf.error_email_empty),"undefined"==typeof wp.a11y)return;wp.a11y.speak(affiliatewp_afnf.error_email_empty,"assertive")}}}),r=Marionette.Object.extend({initialize:function(){var e=Backbone.Radio.channel("submit");this.listenTo(e,"validate:field",this.validateRequired);var a=Backbone.Radio.channel("fields");this.listenTo(a,"change:modelValue",this.validateRequired)},validateRequired:function(a){if("affwp_afnf_username"==a.get("type"))if(a.get("value"))Backbone.Radio.channel("fields").request("remove:error",a.get("id"),"afnf-error"),e.ajax({url:affiliatewp_afnf.ajax_url,type:"get",data:{action:"affiliatewp_afnf_validate_username",afnf_get_username:a.get("value")},success:function(e){0!=e&&(i.debug&&console.afnf(e),Backbone.Radio.channel("fields").request("add:error",a.get("id"),"afnf-error",e),"undefined"!=typeof wp.a11y&&wp.a11y.speak(e,"assertive"))}});else{if(Backbone.Radio.channel("fields").request("add:error",a.get("id"),"afnf-error",affiliatewp_afnf.error_missing_username),"undefined"==typeof wp.a11y)return;wp.a11y.speak(affiliatewp_afnf.error_missing_username,"assertive")}}});new f,new r});